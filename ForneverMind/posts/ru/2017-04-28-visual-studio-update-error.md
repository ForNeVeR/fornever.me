    title: Исправление ошибки обновления Visual Studio 2015
    description: Описание способа установить обновление, даже если оно сообщает об ошибке.
---

На днях я переустанавливал Visual Studio 2015 с последним доступным Update 3.
Как водится у Microsoft, после установки обновления мне было предложено
установить _патчи на обновление_; в данном конкретном случае — патч
**KB3165756**, который в числе прочих преимуществ значительно увеличивает
стабильность IDE по сравнению с чистым Update 3.

Visual Studio 2015 вышла уже достаточно давно, да и с этим патчем у меня
никогда проблем не было: я даже не помню, как его устанавливал в предыдущие
разы. Поэтому никаких проблем я не ожидал, и, как оказалось, совершенно
напрасно.

При установке обновления меня подстерегала ошибка, на решение которой пришлось
потратить некоторое время. Вот текст ошибки: _"KB3165756 requires a member of
the Visual Studio 2015 family to be present or is blocked by another condition
on your computer."_ При этом, разумеется, Visual Studio 2015 у меня установлена,
и что это за состояние мешает ей обновиться — я понятия не имею.

![Скриншот окна с ошибкой обновления][error-screenshot]

Чтобы исправить данную ошибку, нужно запустить обновление с ключом `/layout`:

```console
$ vs14-kb3165756.exe /layout
```

В этом режиме загрузчик обновления сохранит полноценный установочный пакет по
указанному пути (путь он запросит в UI после запуска). Этот полный пакет уже
можно спокойно запускать, у него проблем при установке возникнуть не должно.

[error-screenshot]: ../images/2017-04-28-error-screenshot.png
