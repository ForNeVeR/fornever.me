    title: Restoration of Omea
    description: Omea is a discontinued product of JetBrains, marketed as "The Integrated Information Environment". It was open-sourced back in 2008 under the terms of GPL v2, but had little community interest since then. In this post, I investigate the open-sourced parts and restore the product using modern technologies.
---

## TL; DR
Omea is an "Integrated Information Environment", similar to modern apps like Obsidian but developed in Windows Forms and .NET Framework back in 2004. It was open-sourced by JetBrains in 2008, and so I took the sources, dust them off a bit, and [uploaded to GitHub][omea.open-source]. It now builds and works in modern environment (only Windows so far), though a lot of old modules are still defunct.

## Early History
Back in early 2000s, JetBrains decided to invest into development of Omea, "The Integrated Information Environment". That was a different time, when most of the software and even approaches to sorting through the information weren't yet invented or widespread, so it's possible to see how it was a logical decision.

At 2024-10-04, they released [Omea Reader][omea-reader.announcement], the RSS reader application (remember when RSS was hot topic?), and later that year, at 2004-12-15, [Omea Pro followed][omea-pro.announcement].

It is kinda hard to find the real history now after all these years, but my understanding (based on the Omea Pro announcement post and following [Omea 2.1 changelog][omea.2.1-changelog], available as a part of the source drop) is that Omea Pro was a paid product, and Omea Reader was (or eventually become) a free one.

Let's talk about **Omea Pro** first. The general idea, as I see it, was to just create a central place to organize and search through every piece of information you own: your email, various office document formats on your desktop, RSS feeds, random notes (including fragments from web pages you could save for future reference), and above that — message history from instant messenger apps.

The general app structure really reminds me of modern organizer apps such as [Obsidian][obsidian] and [Roam Research][roam-research], but maybe with more focus on importing data from sources like IM apps and email.

And **Omea Reader** is essentially just a trimmed-down version of Omea Pro, with all the plugins except the RSS one removed (similar to how modern versions of IntelliJ IDEA Community and Ultimate are connected). You could upgrade from Omea Reader to Omea Pro and use the same database and all that, but extend its functionality with all what's available in the Pro version.

There's no public information I was able to find on what else was happening with Omea, but several years later, on 2008-05-13 (or maybe a bit earlier?), [it was open-sourced by JetBrains][omea.open-source.announcement] under the terms of the GPL v2 license. And here our history begins.

## So, What to Do Now?
After some thoughts and after I wasn't able to find any other community attempts at doing anything with the released sources in the last 16 years, I decided to try doing that myself. I believe in software preservation and situations when something has the potential to completely disappear make me uneasy. That random SVN server hosting Omea sources was undoubtedly at risk, seeing how even the notice of releasing the sources has disappeared and I have to link the web archive now instead.

And I was unable to identify any reasons to _not do_ that, so here we go.

In the sections below, I will tell about my adventure on porting Omea's sources from 2008 to modern environment, retelling some anecdotes I encountered while doing that, and show-casing some of the tools and approaches I take when restoring old software.

Previously, I've been kinda successful in restoring a project from similar era, [Bloodmasters][bloodmasters] — but that's a story for another time.

## The Sources
First things first, if we decided to work with the sources, let's investigate what we have in our hands. Thankfully, ol' good SVN is still available for all the modern operating systems, so it's as easy as
```console
$ svn log http://svn.jetbrains.org/omeaopen
```

This will show that there were just five commits in the SVN repo, from March to August 2008. Most likely this indicates that the work as performed elsewhere, and the sources were uploaded in several bunches (or "snapshots" as they are named in the commit messages).

For some SVN repositories, it's quite hard to convert them to other version control systems, because they use some SVN-specific features, such as (ab)using per-file merge history, branching only a file subtree out of the common repo, or something like that. For Omea and its five commits, this is thankfully not a problem: there are no branches in the repository whatsoever.

Since I prefer Git, I used a tool to import the old SVN commits, trying to preserve as much history as I can. You can use basically everything for a simple situation like this one (starting from the infamous `git-svn`), but I used the simplest solution: GitHub SVN repo importer, and it did its job well. Interestingly, SVN import [has been discontinued][github.svn-import.deprecation] since then by GitHub. So, I am really running on the edge here, saving the crumbling software from the inevitable touch of time!

And it turns out, only three commits out of five are meaningful: the other two were initializing the SVN repo's directory structure. And here are the imported commits: [2008-03-07][commit.1], [2008-08-04][commit.2], [2008-08-14][commit.3].

From the commit structure and the word "Snapshot" in the message of each of them, we can conclude that they used the aforementioned approach of dumping the code in bunches, and not developing in the same open-source repository. The last commit included a fragment of the SVN history from the main repository in [the `Changelog.txt` file][omea.open-source.changelog], for further bookkeeping I assume. The commits were done using an anonymous account, but we know the names of the current and the former contributors, because they all are mentioned in the credits window. Some of these people are even still working at JetBrains!

Speaking of the Omea legacy: at least one asset of Omea outlived the product itself: it's the product icon! Some of the files in Rider distribution still bear this icon to this very day (at least in the latest stable 2024.1.4 release), and internal build system, `ABuild.exe`, also bears that. My understanding is that the "product launcher" was initially developed of Omea in .NET department, and was further reused for all sorts of new things that were mostly not user-visible, and thus nobody cared to update the icon. At this point, it has nostalgic value even.

![Omea icon][omea-icon]

## Initial Build Attempts
So, we have the sources. What to do next? Well, build them, of course!

A quick look at the sources shows a lot of things. First of all, as promised in the open-source announcement, the sources are targeting .NET Framework 3.0 and are were likely built in Visual Studio 2008 (the `Src/Omea.sln` file [mentions the version directly][omea.open-source.sln]).

> **Fun Fact**
>
> Visual Studio writes its version into any solution files it edits, and it's really eager to update that. Other IDEs, e.g. Rider, might have different behavior regarding the solution files, so if Rider was a thing back in 2008, it would make identifying the build tool version harder for me.

But there are other build files as well: some build files are duplicated for older NAnt-based build system and target .NET Framework 1.1 (possibly a leftover after the migration they mentioned?), and some of the plugin samples still target older framework since they were never updated.

> **Fun Fact**
>
> ReSharper is the only tool I know [that supports NAnt][resharper.nant] to this day. Ant is a customizable Java build system, and apparently folks were preferring a .NET port of it, NAnt, to whatever customization capabilities early versions of Visual Studio were offering.
>
> Later, in Visual Studio 2005, in the days of .NET Framework 2.0, Microsoft introduced MSBuild with relatively the same customization capabilities but with the direct vendor support, and so usage of NAnt for .NET projects declined.

There are several main solution files, for sources and for setup, and a lot of other stuff to build the product, including the referenced libraries and MSBuild files.

When approaching an old source code dump like this one, the first thing I usually try is to actually build it. This will help to determine further steps: after we have a project we can actually build (however complicated the build process turns out to be), we can track our further changes to at least not break the build.

I have tried loading the solution in modern Visual Studio, and of course it performed a project file migration and broken the build. It was expected, but still worth trying. After taking a look at the build problems, I decided it's not possible to fix them quick, and perhaps I'll have more luck building the product in the original environment it was developed in.

So, back to Visual Studio 2008 we go!

### Build Environment
Sadly, you can't deploy Visual Studio to a modern OS, so we'll need a virtual machine. At the time, I was still confused by the timeline and presence of .NET Framework 1.1 files, so, to be more safe (and possibly be able to deploy Visual Studio 2005 to the same environment), I decided to use Windows XP for this experiment.

While working on yet another old software restoration project of mine, [Overtone][overtone], I have already been researching the ways of running Windows XP in modern VM software (it's not as easy as it seems), so I already know how to get a working free (and seemingly legal?) copy of Windows XP. See [the instructions I wrote for VirtualBox][overtone.instructions].

This time I decided to try the same image in Hyper-V, though, and it was quite a pleasant experience: it works better in Hyper-V. One thing I had problems with was networking, but for now I decided to just bake the sources to another ISO image and copy them from a virtual CD.

See my [instructions on building Omea in the environment close to original][omea.open-source.building]. They explain how to
- obtain a working copy of Windows XP from the old Windows XP mode (that was part of Windows 7 or something),
- obtain a trial version of Visual Studio 2008,
- create a separate ISO image with the project sources, and
- build the sources.

Using this instruction, I was able to build a working version of Omea (well, the one that starts on the VM) and decided that's enough. Sadly, I was unable to build the installer, but if we want to move Omea to the modern age, installer will require huge rework anyway, so I decided to not dive too deep into that.

JetBrains' .NET department did a notably great job on preserving the sources in self-contained state, so that you can just drop them onto a PC with build tools, and they will be built with almost no additional configuration. Notably, modern software builds the same way in this department, of which the folks are rightly proud.

## Licensing

[bloodmasters]: https://github.com/ForNeVeR/bloodmasters/
[commit.1]: https://github.com/ForNeVeR/omea/commit/ab37504f4b4e12bf0b05f853d995d49d52bbecfb
[commit.2]: https://github.com/ForNeVeR/omea/commit/a022d2535f84c6245436953aa26e1cddc0c6da58
[commit.3]: https://github.com/ForNeVeR/omea/commit/97284f55731d17841d80906275c7771a013094c7
[github.svn-import.deprecation]: https://github.blog/changelog/2023-04-17-deprecation-importing-non-git-repositories-with-github-importer/
[obsidian]: https://obsidian.md/
[omea-icon]: ../images/2024-07-15.jetlauncher-with-omea-icon.png
[omea-pro.announcement]: https://blog.jetbrains.com/blog/2004/12/15/pr_151204/
[omea-reader.announcement]: https://blog.jetbrains.com/blog/2004/10/04/pr_041004/
[omea.2.1-changelog]: https://github.com/ForNeVeR/omea/blob/00998281a1a5bb63d36b8733557f302875c8346b/Docs/Omea%202%2C1%20Changelist/Omea%202%2C1%20Changelist.html
[omea.open-source.announcement]: https://web.archive.org/web/20080317031750/http://www.jetbrains.net/confluence/display/OMEA/this+link
[omea.open-source.changelog]: https://github.com/ForNeVeR/omea/blob/00998281a1a5bb63d36b8733557f302875c8346b/Changelog.txt
[omea.open-source.sln]: https://github.com/ForNeVeR/omea/blob/97284f55731d17841d80906275c7771a013094c7/Omea/Src/Omea.sln
[omea.open-source]: https://github.com/ForNeVeR/omea
[overtone.instructions]: https://github.com/ForNeVeR/overtone/blob/be82adc614fcc4faa70d6ec0bd1b73ac0e191772/docs/running-original.md
[overtone]: https://github.com/ForNeVeR/overtone
[resharper.nant]: https://www.jetbrains.com/resharper/features/nant_msbuild_script.html
[roam-research]: https://roamresearch.com/
[omea.open-source.building]: https://github.com/ForNeVeR/omea/blob/8d57f38cc5cd0c56a9c29b8c44acdb84b144ba99/CONTRIBUTING.md
